{"version":3,"sources":["webpack:///./src/pages/activities.js","webpack:///./src/components/layout.js"],"names":["buildDataset","data","datasets","backgroundColor","borderColor","borderWidth","label","initialData","startDate","DateTime","fromObject","month","year","currentDate","local","plus","push","x","toJSDate","y","Activities","props","_this","_React$Component","call","this","state","componentDidMount","_this2","fetch","method","headers","Cache-Control","then","response","text","split","lines","slice","filter","identity","map","line","fromISO","date","toFormat","groupBy","mapValues","size","toPairs","dates","setState","_ref","count","fromFormat","render","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","_components_layout__WEBPACK_IMPORTED_MODULE_3__","style","width","height","react_chartjs_2__WEBPACK_IMPORTED_MODULE_13__","options","LINE_OPTIONS","React","Component","responsive","scales","xAxes","type","display","yAxes","ticks","min","max","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","Layout","children","id"],"mappings":"6SAgBA,SAASA,EAAaC,GAQpB,MAAO,CAAEC,SAAU,CAPN,CACXC,gBAAiB,0BACjBC,YAAa,oBACbC,YAAa,EACbC,MAAO,mBACPL,UAKJ,SAASM,IAKP,IAJA,IAAMC,EAAYC,WAASC,WAAW,CAAEC,MAAO,EAAGC,KAAM,OAClDC,EAAcJ,WAASK,QAEzBP,EAAc,GAEZI,EAAQH,EACZG,EAAQE,EACRF,EAAQA,EAAMI,KAAK,CAAEJ,MAAO,IAE5BJ,EAAYS,KAAK,CACfC,EAAGN,EAAMO,WACTC,EAAG,IAGP,OAAOZ,MAGHa,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MACKC,MAAQ,CACXzB,KAAMM,KAHSe,sCAOnBK,kBAAA,WAAoB,IAAAC,EAAAH,KAClBI,MAxCF,wEAwCkB,CACdC,OAAQ,MACRC,QAAS,CACPC,gBAAiB,cAGlBC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAIA,EAAKC,MAAM,QACxBH,KAAK,SAAAI,GAAK,OAAIA,EAAMC,MAAM,KAC1BL,KAAKM,IAAOC,MACZP,KAAKQ,IAAI,SAAAC,GAAI,OAAIA,EAAKN,MAAM,KAAK,MACjCH,KAAKQ,IAAIhC,WAASkC,UAClBV,KAAKQ,IAAI,SAAAG,GAAI,OAAIA,EAAKC,SAAS,cAC/BZ,KAAKa,IAAQN,MACbP,KAAKc,IAAUC,MACff,KAAKgB,KACLhB,KAAK,SAAAiB,GAAK,OACTtB,EAAKuB,SAAS,CACZlD,KAAMwC,IACJ,SAAAW,GAAA,IAAER,EAAFQ,EAAA,GAAQC,EAARD,EAAA,SAAoB,CAClBnC,EAAGR,WAAS6C,WAAWV,EAAM,WAAW1B,WACxCC,EAAGkC,IAELH,UAMVK,OAAA,WAAS,IACCtD,EAASwB,KAAKC,MAAdzB,KACR,OACEuD,EAAAC,EAAAC,cAACC,EAAA,EAAD,KACEH,EAAAC,EAAAC,cAAA,OAAKE,MAAO,CAAEC,MAAO,IAAKC,OAAQ,MAChCN,EAAAC,EAAAC,cAACK,EAAA,EAAD,CACE9D,KAAMD,EAAaC,GACnB6D,OAAO,MACPD,MAAM,MACNG,QAASC,UA/CIC,IAAMC,WAuDzBF,EAAe,CACnBG,YAAY,EACZC,OAAQ,CACNC,MAAO,CAAC,CAAEC,KAAM,OAAQC,SAAS,IACjCC,MAAO,CACL,CACED,SAAS,EACTE,MAAO,CAAEC,IAAK,EAAGC,IAAK,QAMfxD,8CCjHf,IAAAyD,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAQeI,IANA,SAAA7B,GAAA,IAAG8B,EAAH9B,EAAG8B,SAAH,OACbH,EAAAtB,EAAAC,cAAA,OAAKyB,GAAG,UACNJ,EAAAtB,EAAAC,cAAA,OAAKyB,GAAG,aAAaD","file":"component---src-pages-activities-js-027eaa64507206e01cca.js","sourcesContent":["import React from 'react'\nimport Layout from '../components/layout'\nimport { DateTime } from 'luxon'\nimport map from 'lodash/fp/map'\nimport groupBy from 'lodash/fp/groupBy'\nimport mapValues from 'lodash/fp/mapValues'\nimport filter from 'lodash/fp/filter'\nimport size from 'lodash/fp/size'\nimport toPairs from 'lodash/fp/toPairs'\nimport identity from 'lodash/fp/identity'\nimport get from 'lodash/fp/get'\nimport { Line } from 'react-chartjs-2'\n\nconst FILE_URL =\n  'https://dl.dropboxusercontent.com/s/dpbdlobcf6y1snn/workout.gpi?raw=1'\n\nfunction buildDataset(data) {\n  const line = {\n    backgroundColor: 'rgba(54, 162, 235, 0.2)',\n    borderColor: 'rgb(54, 162, 235)',\n    borderWidth: 1,\n    label: 'activities count',\n    data,\n  }\n  return { datasets: [line] }\n}\n\nfunction initialData() {\n  const startDate = DateTime.fromObject({ month: 4, year: 2018 })\n  const currentDate = DateTime.local()\n\n  let initialData = []\n  for (\n    let month = startDate;\n    month < currentDate;\n    month = month.plus({ month: 1 })\n  ) {\n    initialData.push({\n      x: month.toJSDate(),\n      y: 0,\n    })\n  }\n  return initialData\n}\n\nclass Activities extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: initialData(),\n    }\n  }\n\n  componentDidMount() {\n    fetch(FILE_URL, {\n      method: 'GET',\n      headers: {\n        'Cache-Control': 'no-cache',\n      },\n    })\n      .then(response => response.text())\n      .then(text => text.split('\\n'))\n      .then(lines => lines.slice(2))\n      .then(filter(identity))\n      .then(map(line => line.split(' ')[0]))\n      .then(map(DateTime.fromISO))\n      .then(map(date => date.toFormat('yyyy MM')))\n      .then(groupBy(identity))\n      .then(mapValues(size))\n      .then(toPairs)\n      .then(dates =>\n        this.setState({\n          data: map(\n            ([date, count]) => ({\n              x: DateTime.fromFormat(date, 'yyyy MM').toJSDate(),\n              y: count,\n            }),\n            dates\n          ),\n        })\n      )\n  }\n\n  render() {\n    const { data } = this.state\n    return (\n      <Layout>\n        <div style={{ width: 500, height: 500 }}>\n          <Line\n            data={buildDataset(data)}\n            height=\"500\"\n            width=\"500\"\n            options={LINE_OPTIONS}\n          />\n        </div>\n      </Layout>\n    )\n  }\n}\n\nconst LINE_OPTIONS = {\n  responsive: true,\n  scales: {\n    xAxes: [{ type: 'time', display: true }],\n    yAxes: [\n      {\n        display: true,\n        ticks: { min: 0, max: 20 },\n      },\n    ],\n  },\n}\n\nexport default Activities\n","import React from 'react'\n\nconst Layout = ({ children }) => (\n  <div id=\"layout\">\n    <div id=\"container\">{children}</div>\n  </div>\n)\n\nexport default Layout\n"],"sourceRoot":""}