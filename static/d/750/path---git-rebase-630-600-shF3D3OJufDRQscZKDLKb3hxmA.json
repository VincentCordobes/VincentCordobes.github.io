{"data":{"site":{"siteMetadata":{"title":"Vincent's page","author":"Vincent Cordobes"}},"markdownRemark":{"id":"14bdcbc8-d066-5675-b1c3-877ea6091375","html":"<p>⚠️ I assume you have basic knowledge about <em>git</em>, and that you are familiar with its <code class=\"language-text\">index</code>, <code class=\"language-text\">working tree</code> as well as commands like <code class=\"language-text\">reset</code>, <code class=\"language-text\">cherry-pick</code>.</p>\n<p>There are lots of commands in git and you often can achieve your goal in several different ways. I usually  manage to get my stuff done with just few commands like <code class=\"language-text\">rebase</code>, <code class=\"language-text\">reset</code>, <code class=\"language-text\">cherry-pick</code>. Sometimes I felt I was doing it in an ineffective way though. Like for example <em>squashing</em> all commits into a single one so that it is easier to <em>rebase</em> afterward 🙈\nEven though I knew that <code class=\"language-text\">rebase --onto</code> would be useful, I never took the time to <em>man</em> it… until recently.</p>\n<p>I guess now is a good time to write something about it (Actually I just want to inaugurate my blog with this post… any reason is a good reason 😝)</p>\n<h3>When might it be useful?</h3>\n<p>Here are some use-cases:</p>\n<ul>\n<li>you want to <code class=\"language-text\">cherry-pick</code> multiples commits</li>\n<li>you have created a branch from the ‘wrong’ one and you want to start over from the ‘right’ one</li>\n<li>you want to delete a range of commits</li>\n</ul>\n<p>Basically it all comes down to this: <strong>apply a range of commits somewhere</strong> </p>\n<h3>Rebase in its simplest form</h3>\n<p>Lets begin with a little reminder about how rebase works in its simplest form:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">git rebase upstream [branch]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Let say that you are on branch <code class=\"language-text\">topic</code> so <code class=\"language-text\">HEAD</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">→</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> <code class=\"language-text\">topic</code> and you run <code class=\"language-text\">git rebase master</code>. </p>\n<figure>\n    <iframe style=\"height:130px;\" scrolling=\"no\" src=\"/git1/\"></iframe>\n    <figcaption>git reset --hard master (click to animate)</figcaption>\n</figure>\n<p>First the index and working tree are reset to A. This is exactly like running <code class=\"language-text\">git reset --hard A</code> except that changes to tracked files in the working tree are saved somewhere for later use.\nAfter that, git will apply those saved commits one by one. This is like “cherry-picking” those commits.</p>\n<p>Note that you don’t have to be on branch B, git can perform a <code class=\"language-text\">checkout B</code> for you when you specify the 2nd arg <code class=\"language-text\">branch</code> <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">→</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> <code class=\"language-text\">git rebase A B</code>\nSo <code class=\"language-text\">git rebase A</code> is just a short hand for <code class=\"language-text\">git rebase A B</code> <strong>when</strong> you are already on <code class=\"language-text\">B</code> branch </p>\n<p>To summarize all of the following scenarios are equivalents:\n%% l23 from firstdraft </p>\n<h3>How about the <code class=\"language-text\">--onto</code> option?</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">git rebase --onto newbase upstream [branch]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The only difference is that git will reset to <code class=\"language-text\">newbase</code> instead of <code class=\"language-text\">upstream</code> and will then applies commits between <code class=\"language-text\">upstream</code> (exluded) and <code class=\"language-text\">branch</code> (included)</p>\n<p>%% ouverture</p>\n<h3>Feel the power of <code class=\"language-text\">-i</code> option</h3>\n<p>The <code class=\"language-text\">-i</code> option is one of my favorite one because it lets you squash, delete, rename, edit..  basically playing with the past !! ❤️  but this is another story</p>","frontmatter":{"title":"Rebase onto","date":"December 26, 2018","spoiler":"Rewrite the past in fewer step"},"fields":{"slug":"/git-rebase/"}}},"pageContext":{"slug":"/git-rebase/","previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello World"}},"next":null}}