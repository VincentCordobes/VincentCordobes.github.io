{"version":3,"sources":["webpack:///./src/pages/git-rebase-figure2.js","webpack:///./src/components/animated-ascii.js"],"names":["Figure1","steps","positions","renderExtra","stepNumber","withCounter","count","exitX","exitY","transform","key","counter","transition","type","stiffness","damping","Line","posed","div","pre","opacity","duration","enter","exit","LineT","x","preX","Somewhere","forwardRef","ref","children","style","fontSize","color","position","margin","normalize","y","buildLine","ascii","prefix","buildStat","fn","text","replace","Rebase","useState","step","setStep","width","marginRight","marginLeft","marginTop","userSelect","lineHeight","cursor","onClick","length","className","preEnterPose","stepsLines","map","split","some","linePosition","Error","every","stepLines","stepIndex","line","lineIndex","linePositions","config","i","push","buildAnimatedAscii"],"mappings":"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","file":"component---src-pages-git-rebase-figure-2-js-f7589994a579345dde3e.js","sourcesContent":["import React, { useState, useEffect, forwardRef } from \"react\"\nimport posed, { PoseGroup } from \"react-pose\"\nimport Layout from \"../components/layout\"\nimport AnimatedAscii, {\n  Somewhere,\n  withCounter,\n} from \"../components/animated-ascii\"\n\nconst Figure1 = () => {\n  const steps = [\n    `\n            E---F  topicB\n           /\n      C---D  topicA\n     /\nA---B  master`,\n    `\n    topicB\n    |\n    | C---D  topicA\n    ↓/\nA---B  master`,\n    `\n     E'--F' topicB\n    /\n    | C---D  topicA\n    |/\nA---B  master`,\n  ]\n  const positions = [[-150, 80, 70], [-70, 0, 70], [], [], []]\n\n  return (\n    <AnimatedAscii\n      steps={steps}\n      positions={positions}\n      renderExtra={(stepNumber) =>\n        stepNumber == 1 &&\n        withCounter((count) => (\n          <Somewhere\n            exitX={-30}\n            exitY={-15}\n            transform={\"translate(68px, -94px)\"}\n            key={`somewhere${count}`}\n          >\n            E---F\n          </Somewhere>\n        ))\n      }\n    />\n  )\n}\n\nexport default Figure1\n","import React, { useState, useEffect, forwardRef } from \"react\"\nimport posed, { PoseGroup } from \"react-pose\"\nimport Layout from \"../components/layout\"\n\n// Don't look at this please this is an\n// MVP of smth but it's absolutely horrible\n// You have been warned...\n\nconst transition = { type: \"spring\", stiffness: 300, damping: 50 }\n\nconst Line = posed.div({\n  pre: {\n    opacity: 0,\n    transition: { duration: 500 },\n  },\n  enter: {\n    opacity: 1,\n    transition: { duration: 500 },\n  },\n  exit: {\n    opacity: 0,\n    transition: { duration: 500 },\n  },\n})\n\nconst LineT = posed.div({\n  pre: {\n    opacity: 0,\n    x: ({ preX }) => preX,\n    transition,\n  },\n  enter: {\n    opacity: 1,\n    x: 0,\n    transition,\n  },\n  exit: {\n    opacity: 0,\n    x: ({ exitX }) => exitX,\n    transition,\n  },\n})\n\nexport const Somewhere = posed(\n  forwardRef(({ children, style, transform }, ref) => (\n    <div ref={ref} style={style}>\n      <div\n        style={{\n          fontSize: 13,\n          color: \"#b1b1b1\",\n          position: \"absolute\",\n          margin: \"auto\",\n          transform,\n        }}\n      >\n        {normalize(`tmp: ${children}`)}\n      </div>\n    </div>\n  ))\n)({\n  pre: {\n    opacity: 0,\n    x: 0,\n    y: 0,\n    transition: { duration: 500 },\n  },\n  enter: {\n    opacity: 1,\n    x: 0,\n    y: 0,\n    transition: { duration: 500 },\n  },\n  exit: {\n    opacity: 0,\n    x: ({ exitX }) => exitX,\n    y: ({ exitY }) => exitY,\n    transition,\n  },\n})\n\nconst buildLine = (() => {\n  let counter = 0\n  return ({ ascii, prefix, preX, exitX }) => (\n    <LineT preX={preX} exitX={exitX} key={ascii + counter++}>\n      {normalize(ascii)}\n    </LineT>\n  )\n})()\n\nconst buildStat = (() => {\n  let counter = 0\n  return ({ ascii }) => <Line key={ascii + counter}>{normalize(ascii)}</Line>\n})()\n\nexport const withCounter = (() => {\n  let counter = 0\n  return (fn) => fn(counter++)\n})()\n\nconst steps = (prefix) => [\n  [\n    buildLine({ ascii: \"      X---Y---Z  topic\", preX: 40, exitX: -87 }),\n    buildLine({ ascii: \"     /\", preX: 40, exitX: 32 }),\n    buildStat({ ascii: \"A---B---C  master\" }),\n  ],\n  [\n    buildLine({ ascii: \"        topic\", preX: 87, exitX: 50 }),\n    buildLine({ ascii: \"        ↓\", preX: -32, exitX: 10 }),\n    buildStat({ ascii: \"A---B---C  master\" }),\n    <Somewhere key={`somewhere${prefix}`}>X---Y---Z</Somewhere>,\n  ],\n  [\n    buildLine({ ascii: \"          X'--Y'--Z' topic\", preX: -40, exitX: -40 }),\n    buildLine({ ascii: \"         /\", preX: -10, exitX: -40 }),\n    buildStat({ ascii: \"A---B---C  master\" }),\n  ],\n]\n\nconst buildAnimatedAscii = ({ steps, positions, renderExtra }) => {\n  const stepsLines = steps.map((ascii) => {\n    const [_, ...rest] = ascii.split(\"\\n\")\n    return rest\n  })\n\n  const missingPosition = positions.some(\n    (linePosition) =>\n      linePosition.length !== stepsLines.length && linePosition.length > 0\n  )\n  if (missingPosition) {\n    throw new Error(\"There must be positions for each steps!\")\n  }\n\n  const m = stepsLines.every(\n    (stepLines) => stepLines.length === positions.length\n  )\n  if (!m) {\n    throw new Error(\"Positions.length must be equal to the number of lines\")\n  }\n\n  return stepsLines\n    .map((step, stepIndex) => {\n      return step.map((line, lineIndex) => {\n        const linePositions = positions[lineIndex]\n        if (!linePositions.length) {\n          return buildStat({ ascii: line })\n        } else {\n          const config = {\n            ascii: line,\n            preX: -linePositions[(stepIndex - 1 + steps.length) % steps.length],\n            exitX: linePositions[stepIndex],\n          }\n          return buildLine(config)\n        }\n      })\n    })\n    .map((step, i) => {\n      renderExtra && step.push(renderExtra(i))\n      return step\n    })\n}\n\nconst DISTANCE_CHAR_RATIO = 0.1\n\nfunction Rebase({ steps, positions, renderExtra }) {\n  const [step, setStep] = useState(0)\n  return (\n    <Layout>\n      <div\n        style={{\n          width: 272,\n          marginRight: \"auto\",\n          marginLeft: \"auto\",\n          marginTop: -5,\n          userSelect: \"none\",\n          position: \"relative\",\n          lineHeight: 1.5,\n        }}\n      >\n        <figure\n          style={{ cursor: \"pointer\" }}\n          onClick={() => setStep((step + 1) % steps.length)}\n        >\n          <div className=\"mono\" style={{ fontSize: 16 }}>\n            <PoseGroup preEnterPose=\"pre\">\n              {buildAnimatedAscii({ steps, positions, renderExtra })[step]}\n            </PoseGroup>\n          </div>\n          <figcaption style={{ marginTop: 15 }}>\n            Step {step} (tap to animate)\n          </figcaption>\n        </figure>\n      </div>\n    </Layout>\n  )\n}\n\nfunction normalize(text) {\n  return text.replace(/\\s/g, \"\\u00A0\")\n}\n\nexport default Rebase\n"],"sourceRoot":""}