{"version":3,"sources":["webpack:///./src/pages/git-rebase-figure1.js","webpack:///./src/components/layout.js","webpack:///./src/components/animated-ascii.js"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_animated_ascii__WEBPACK_IMPORTED_MODULE_3__","Figure1","a","createElement","steps","positions","renderExtra","stepNumber","withCounter","count","exitX","exitY","transform","key","Layout","_ref","children","id","counter","transition","type","stiffness","damping","Line","posed","div","pre","opacity","duration","enter","exit","LineT","x","preX","_ref2","Somewhere","forwardRef","_ref3","ref","style","react__WEBPACK_IMPORTED_MODULE_2___default","fontSize","color","position","margin","normalize","y","_ref4","_ref5","buildLine","_ref6","ascii","prefix","buildStat","_ref7","fn","buildAnimatedAscii","_ref8","stepsLines","map","_ascii$split","split","slice","some","linePosition","length","Error","every","stepLines","step","stepIndex","line","lineIndex","linePositions","config","i","push","text","replace","Rebase","_ref9","_useState","useState","setStep","_components_layout__WEBPACK_IMPORTED_MODULE_4__","width","marginRight","marginLeft","marginTop","userSelect","lineHeight","cursor","onClick","className","react_pose__WEBPACK_IMPORTED_MODULE_3__","preEnterPose"],"mappings":"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","file":"component---src-pages-git-rebase-figure-1-js-3001dc31fde4e5ea8b4f.js","sourcesContent":["import React, { useState, useEffect, forwardRef } from 'react'\nimport posed, { PoseGroup } from 'react-pose'\nimport Layout from '../components/layout'\nimport AnimatedAscii, {\n  Somewhere,\n  withCounter,\n} from '../components/animated-ascii'\n\nconst Figure1 = () => {\n  const steps = [\n    `\n      X---Y---Z  topic\n     /\nA---B---C  master`,\n    `\n        topic\n        ↓\nA---B---C  master`,\n    `\n          X'--Y'--Z' topic\n         /\nA---B---C  master`,\n  ]\n  const positions = [[-87, 50, -40], [32, 10, -40], []]\n\n  return (\n    <AnimatedAscii\n      steps={steps}\n      positions={positions}\n      renderExtra={stepNumber =>\n        stepNumber == 1 &&\n        withCounter(count => (\n          <Somewhere\n            exitX={-10}\n            exitY={-10}\n            transform={'translate(108px, -47px)'}\n            key={`somewhere${count}`}\n          >\n            X---Y---Z\n          </Somewhere>\n        ))\n      }\n    />\n  )\n}\n\nexport default Figure1\n","import React from 'react'\n\nconst Layout = ({ children }) => (\n  <div id=\"layout\">\n    <div id=\"container\">{children}</div>\n  </div>\n)\n\nexport default Layout\n","import React, { useState, useEffect, forwardRef } from 'react'\nimport posed, { PoseGroup } from 'react-pose'\nimport Layout from '../components/layout'\n\n// Don't look at this please this is an\n// MVP of smth but it's absolutely horrible\n// You have been warned...\n\nconst transition = { type: 'spring', stiffness: 300, damping: 50 }\n\nconst Line = posed.div({\n  pre: {\n    opacity: 0,\n    transition: { duration: 500 },\n  },\n  enter: {\n    opacity: 1,\n    transition: { duration: 500 },\n  },\n  exit: {\n    opacity: 0,\n    transition: { duration: 500 },\n  },\n})\n\nconst LineT = posed.div({\n  pre: {\n    opacity: 0,\n    x: ({ preX }) => preX,\n    transition,\n  },\n  enter: {\n    opacity: 1,\n    x: 0,\n    transition,\n  },\n  exit: {\n    opacity: 0,\n    x: ({ exitX }) => exitX,\n    transition,\n  },\n})\n\nexport const Somewhere = posed(\n  forwardRef(({ children, style, transform }, ref) => (\n    <div ref={ref} style={style}>\n      <div\n        style={{\n          fontSize: 13,\n          color: '#b1b1b1',\n          position: 'absolute',\n          margin: 'auto',\n          transform,\n        }}\n      >\n        {normalize(`tmp: ${children}`)}\n      </div>\n    </div>\n  ))\n)({\n  pre: {\n    opacity: 0,\n    x: 0,\n    y: 0,\n    transition: { duration: 500 },\n  },\n  enter: {\n    opacity: 1,\n    x: 0,\n    y: 0,\n    transition: { duration: 500 },\n  },\n  exit: {\n    opacity: 0,\n    x: ({ exitX }) => exitX,\n    y: ({ exitY }) => exitY,\n    transition,\n  },\n})\n\nconst buildLine = (() => {\n  let counter = 0\n  return ({ ascii, prefix, preX, exitX }) => (\n    <LineT preX={preX} exitX={exitX} key={ascii + counter++}>\n      {normalize(ascii)}\n    </LineT>\n  )\n})()\n\nconst buildStat = (() => {\n  let counter = 0\n  return ({ ascii }) => <Line key={ascii + counter}>{normalize(ascii)}</Line>\n})()\n\nexport const withCounter = (() => {\n  let counter = 0\n  return fn => fn(counter++)\n})()\n\nconst steps = prefix => [\n  [\n    buildLine({ ascii: '      X---Y---Z  topic', preX: 40, exitX: -87 }),\n    buildLine({ ascii: '     /', preX: 40, exitX: 32 }),\n    buildStat({ ascii: 'A---B---C  master' }),\n  ],\n  [\n    buildLine({ ascii: '        topic', preX: 87, exitX: 50 }),\n    buildLine({ ascii: '        ↓', preX: -32, exitX: 10 }),\n    buildStat({ ascii: 'A---B---C  master' }),\n    <Somewhere key={`somewhere${prefix}`}>X---Y---Z</Somewhere>,\n  ],\n  [\n    buildLine({ ascii: \"          X'--Y'--Z' topic\", preX: -40, exitX: -40 }),\n    buildLine({ ascii: '         /', preX: -10, exitX: -40 }),\n    buildStat({ ascii: 'A---B---C  master' }),\n  ],\n]\n\nconst buildAnimatedAscii = ({ steps, positions, renderExtra }) => {\n  const stepsLines = steps.map(ascii => {\n    const [_, ...rest] = ascii.split('\\n')\n    return rest\n  })\n\n  const missingPosition = positions.some(\n    linePosition =>\n      linePosition.length !== stepsLines.length && linePosition.length > 0\n  )\n  if (missingPosition) {\n    throw new Error('There must be positions for each steps!')\n  }\n\n  const m = stepsLines.every(stepLines => stepLines.length === positions.length)\n  if (!m) {\n    throw new Error('Positions.length must be equal to the number of lines')\n  }\n\n  return stepsLines\n    .map((step, stepIndex) => {\n      return step.map((line, lineIndex) => {\n        const linePositions = positions[lineIndex]\n        if (!linePositions.length) {\n          return buildStat({ ascii: line })\n        } else {\n          const config = {\n            ascii: line,\n            preX: -linePositions[(stepIndex - 1 + steps.length) % steps.length],\n            exitX: linePositions[stepIndex],\n          }\n          return buildLine(config)\n        }\n      })\n    })\n    .map((step, i) => {\n      renderExtra && step.push(renderExtra(i))\n      return step\n    })\n}\n\nconst DISTANCE_CHAR_RATIO = 0.1\n\nfunction Rebase({ steps, positions, renderExtra }) {\n  const [step, setStep] = useState(0)\n  return (\n    <Layout>\n      <div\n        style={{\n          width: 272,\n          marginRight: 'auto',\n          marginLeft: 'auto',\n          marginTop: -5,\n          userSelect: 'none',\n          position: 'relative',\n          lineHeight: 1.5,\n        }}\n      >\n        <figure\n          style={{ cursor: 'pointer' }}\n          onClick={() => setStep((step + 1) % steps.length)}\n        >\n          <div className=\"mono\" style={{ fontSize: 16 }}>\n            <PoseGroup preEnterPose=\"pre\">\n              {buildAnimatedAscii({ steps, positions, renderExtra })[step]}\n            </PoseGroup>\n          </div>\n          <figcaption style={{ marginTop: 15 }}>\n            Step {step} (tap to animate)\n          </figcaption>\n        </figure>\n      </div>\n    </Layout>\n  )\n}\n\nfunction normalize(text) {\n  return text.replace(/\\s/g, '\\u00A0')\n}\n\nexport default Rebase\n"],"sourceRoot":""}